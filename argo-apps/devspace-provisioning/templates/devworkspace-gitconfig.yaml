{{- range $key := .Values.users }}
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: {{.name}}-git-config
  namespace: {{.name}}-dev
  labels:
    app.kubernetes.io/defaultName: git-config-secret
    app.kubernetes.io/part-of: devworkspace-operator
    controller.devfile.io/watch-configmap: 'true'
  annotations:
    controller.devfile.io/mount-path: /home/user/.gitconfig 
    rgocd.argoproj.io/sync-wave: "1"    

data:
  gitconfig: |
    [filter "lfs"]
        clean = git-lfs clean -- %f
        smudge = git-lfs smudge -- %f
        process = git-lfs filter-process
        required = true
    [credential]
        helper = store --file /.git-credentials/credentials
{{- end }}
